<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<constant name="struts.i18n.encoding" value="utf-8"></constant>
	<constant name="struts.custom.i18n.resources" value="myMessage"></constant>
	<package name="struts2" extends="struts-default,json-default">
		<!-- 查看用户是否在线拦截器 ，组合<result name="login" type="redirect">/login.jsp</result>一起用
		还要带上<interceptor-ref name="defaultStack"></interceptor-ref>要不然没法传值-->
		<interceptors>
			<interceptor name="userInterceptor" class="com.sanqing.interceptor.UserInterceptor"></interceptor>
		</interceptors>
		
		<action name="showPhoto" class="com.sanqing.action.ShowPhoto">
			<result name="success">/pages/back/showphoto.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		
		<!-- 前台 -->
		<action name="head" class="picAction"  method="head">
			<result name="success">/pages/head.jsp</result>
		</action>
		<action name="headDetail" class="picAction"  method="headDetail">
			<result name="success">/pages/headDetail.jsp</result>
		</action>
		<action name="headAboutDetail" class="picAction"  method="headAboutDetail">
			<result name="success">/pages/headAboutDetail.jsp</result>
		</action>
		<action name="headNews" class="picAction"  method="headNews">
			<result name="success">/pages/headNews.jsp</result>
		</action>
		<action name="headNewsDetail" class="picAction"  method="headNewsDetail">
			<result name="success">/pages/headNewsDetail.jsp</result>
		</action>
		<action name="headTagMore" class="picAction"  method="headTagMore">
			<result name="success">/pages/headTagMore.jsp</result>
		</action>
		
		<!-- 前台APP -->
		<action name="headApp" class="picAppAction"  method="headApp">
			<result name="success">/pagesApp/head.jsp</result>
		</action>
		<action name="headDetailApp" class="picAppAction"  method="headDetailApp">
			<result name="success">/pagesApp/headDetail.jsp</result>
		</action>
		<action name="headAboutDetailApp" class="picAppAction"  method="headAboutDetailApp">
			<result name="success">/pagesApp/headAboutDetail.jsp</result>
		</action>
		<action name="headNewsApp" class="picAppAction"  method="headNewsApp">
			<result name="success">/pagesApp/headNews.jsp</result>
		</action>
		<action name="headNewsDetailApp" class="picAppAction"  method="headNewsDetailApp">
			<result name="success">/pagesApp/headNewsDetail.jsp</result>
		</action>
		<action name="headTagMoreApp" class="picAppAction"  method="headTagMoreApp">
			<result name="success">/pagesApp/headTagMore.jsp</result>
		</action>
		
		<!-- 后台 -->
		<action name="back" class="backAction"  method="back">
			<result name="success">/pages/back/back.jsp</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="dataStatBack" class="backAction"  method="dataStatBack">
			<result name="success">/pages/back/dataStatBack.jsp</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- Pic-->
		<action name="picMag" class="picAction"  method="picMag">
			<result name="success">/pages/back/picMag.jsp</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="picDel" class="picAction" method="delete">
			<result name="success" type="chain">picMag</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- Tag-->
		<action name="tag" class="tagAction"  method="tag">
			<result name="success">/pages/back/tag.jsp</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="tagSave" class="tagAction" method="saveOrUpdate">
			<result name="success" type="chain">tag</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="tagDel" class="tagAction" method="delete">
			<result name="success" type="chain">tag</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- PicDetail-->
		<action name="picDetail" class="picDetailAction"  method="showList">
			<result name="success">/pages/back/picDetail.jsp</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- 关于我们 -->
		<action name="aboutDetail" class="picDetailAction"  method="showListAbout">
			<result name="success">/pages/back/aboutDetail.jsp</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- user-->
		<action name="userMag" class="userAction"  method="userMag">
			<result name="success">/pages/back/userMag.jsp</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="userSave" class="userAction" method="saveOrUpdate">
			<result name="success" type="redirectAction">userMag</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="userDel" class="userAction" method="delete">
			<result name="success" type="chain">userMag</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="resetPassword" class="userAction" method="resetPassword">
			<result name="success" type="redirectAction">userMag</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
			<action name="updateMe" class="userAction" method="updateMe">
			<result name="success" type="redirectAction">back</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="updatePassword" class="userAction" method="updatePassword">
			<result name="success" type="redirectAction">back</result>
			<result name="error">/error.jsp</result>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>



		
		<action name="login" class="loginAction" method="login">
			<result type="json">  
                <param name="root">rows</param>  
            </result>  
		</action>
		<action name="loginByQuestion" class="loginAction" method="loginByQuestion">
			<result type="json">  
                <param name="root">rows</param>  
            </result>  
		</action>
		<!-- Tag-->
		<action name="tagAll" class="tagAction" method="showAll">
			<result type="json">  
                <!-- 这里指定将被Struts2序列化的属性，该属性在action中必须有对应的getter方法 -->  
                <param name="root">rows</param>  
            </result>  
            <result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!--Pic-->
		<action name="picSave" class="picAction" method="saveOrUpdate">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
            <result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- 保存的时候验证用户是否存在即可，查询会出json数据，都要除非一些隐藏的不想让人看到 -->
		<action name="picAll" class="picAction"  method="showListAll">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
            <result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="updatePicSn" class="picAction"  method="updateSn">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- PicDetail-->
		<action name="picDetailSave" class="picDetailAction" method="saveOrUpdate">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
            <result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="picDetailDel" class="picDetailAction" method="delete">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="picDetailAll" class="picDetailAction"  method="showListAll">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
            <result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="updatePicDetailSn" class="picDetailAction"  method="updateSn">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- User -->
		<action name="findByUsername" class="userAction"  method="findByUsername">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<!-- File-->
		<action name="fileUploadJson" class="com.sanqing.action.PhotoUpload">
			<result type="json">  
                <param name="root">rows</param>  
            </result> 
			<result name="input">/login.jsp</result>  <!-- <result name="input //type="chain"">/user/showphoto.jsp</result> input:提交表单错误时-->
			<result name="error">/error.jsp</result>
			<!-- 配置fileUpload拦截器 -->
			<interceptor-ref name="fileUpload">
				<!-- 配置允许上传文件类型 -->
				<!-- <param name="allowedTypes">image/bmp,image/pjpeg,image/gif,image/jpg,image/png</param> -->
				<!-- 配置允许上传文件大小最大值 -->
				<!-- 允许后缀名为png,bmp,jpg,doc,xls的文件上传 -->     
				<param name="allowedExtensions">  
				    png,bmp,jpg,pjpeg,gif,ico  
				</param>  
				<param name="maximumSize">5242880</param> <!-- 5M -->
			</interceptor-ref>
			<result name="login" type="redirect">/login.jsp</result>
			<interceptor-ref name="userInterceptor"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
	</package>
</struts>